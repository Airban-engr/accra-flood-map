<!DOCTYPE html>
<html lang="en">
<head>
 <!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="Accra Flood Risk Map – Demo">
<meta property="og:description" content="Interactive flood-risk zones across Accra with popups, legend, and clear risk-level styling.">
<meta property="og:url" content="https://YOUR-USERNAME.github.io/accra-flood-map/">

<!-- Use jsDelivr CDN for the image -->
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/YOUR-USERNAME/accra-flood-map@main/preview.png?v=7">
<meta property="og:image:secure_url" content="https://cdn.jsdelivr.net/gh/YOUR-USERNAME/accra-flood-map@main/preview.png?v=7">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="Accra map with colored flood-risk polygons and legend.">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Accra Flood Risk Map – Demo">
<meta name="twitter:description" content="Interactive flood-risk zones across Accra with popups, legend, and clear risk-level styling.">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/YOUR-USERNAME/accra-flood-map@main/preview.png?v=7">

</head>
<body>
  <div id="map"></div>

  <!-- Leaflet JS (must be after the map div) -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Init map (Accra)
    const map = L.map('map').setView([5.56, -0.20], 12);

    // Basemap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Color ramp
    const riskColor = r =>
      r === 'High' ? '#d62828' :
      r === 'Medium' ? '#f77f00' :
      r === 'Low' ? '#fcbf49' : '#6c757d';

    // Load polygons (file exists because you can open it directly)
    fetch('data/flood_risk_zones.geojson')
      .then(r => r.json())
      .then(geo => {
        const flood = L.geoJSON(geo, {
          style: f => ({
            color: riskColor(f.properties?.risk),
            weight: 1,
            fillColor: riskColor(f.properties?.risk),
            fillOpacity: 0.25
          }),
          onEachFeature: (f, l) => {
            const name = f.properties?.name || 'Area';
            const risk = f.properties?.risk || 'Unknown';
            l.bindPopup(`<b>${name}</b><br>Flood Risk: <b>${risk}</b>`);
          }
        }).addTo(map);

        try { map.fitBounds(flood.getBounds(), { padding: [20,20] }); } catch (e) {}
        // Legend
        const legend = L.control({position:'bottomright'});
        legend.onAdd = () => {
          const div = L.DomUtil.create('div');
          div.style.cssText = 'background:rgba(255,255,255,.95);padding:8px 10px;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,.15);font:12px system-ui;';
          div.innerHTML = `
            <b>Flood Risk</b>
            <div style="margin-top:6px">
              <div style="display:flex;align-items:center;gap:6px;margin:2px 0">
                <span style="width:12px;height:12px;background:#d62828;border:1px solid #999;display:inline-block"></span> High
              </div>
              <div style="display:flex;align-items:center;gap:6px;margin:2px 0">
                <span style="width:12px;height:12px;background:#f77f00;border:1px solid #999;display:inline-block"></span> Medium
              </div>
              <div style="display:flex;align-items:center;gap:6px;margin:2px 0">
                <span style="width:12px;height:12px;background:#fcbf49;border:1px solid #999;display:inline-block"></span> Low
              </div>
            </div>`;
          return div;
        };
        legend.addTo(map);
      })
      .catch(err => {
        console.error('Failed to load data/flood_risk_zones.geojson', err);
        alert('Flood data missing or invalid at /data/flood_risk_zones.geojson');
      });
  </script>
</body>
</html>
